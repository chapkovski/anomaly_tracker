(function(t){function e(e){for(var a,i,s=e[0],c=e[1],u=e[2],l=0,p=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/anomaly_tracker/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0137":function(t,e,n){t.exports=n.p+"img/good_data_quality.598c7f7c.png"},"24c3":function(t,e,n){t.exports=n.p+"img/normal.9e03f63c.png"},"2c36":function(t,e,n){t.exports=n.p+"img/rep.bfd17952.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-app",[n("Loading"),n("Main")],1)],1)},o=[],i=n("5530"),s=n("1da1"),c=(n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"8"}},[n("v-row",{staticClass:"text-center"},[n("v-col",{attrs:{cols:"12"}},[n("v-card",{staticClass:"my-3"},[n("v-card-text",[n("detailed-chart",{attrs:{zoomer:!1,title:"Full data"}})],1)],1),n("v-card",{staticClass:"my-3"},[n("v-card-text",[n("detailed-chart",{attrs:{zoomer:!0,title:"Area to detect anomaly:"}})],1)],1)],1)],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-card",[n("v-card-title",[t._v("Instructions:")]),n("v-card-text",{staticClass:"text-left"},[n("div",[t._v(" On two charts to the left, you can see the data for the time series. Data usually have regular patterns for some days. The first chart is the full data. Please use full data to see if the pattern was broken. The second chart is zoomed to the area where we would you to detect if there is any anomaly there. This chart can help to see the block with the potential anomaly with different zoom. ")]),n("div",[t._v(" If there is uncertainty about the pattern you can use the mouse to zoom/pan bottom plot to check nearby regions. ")]),n("div",[t._v("Special cases:")]),n("div",[t._v(" 1) If the data sector you are evaluating is the part of a bigger anomaly label it as an anomaly ")]),n("div",[t._v(" 2) If the data sector has a spike, but it's part of the regular pattern label it as not an anomaly ")])])],1),n("form-module")],1)],1)],1)}),u=[],d=n("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{ref:"form",attrs:{method:"post",id:"mturk_form",action:t.action}},[a("input",{attrs:{type:"hidden",name:"assignmentId"},domProps:{value:t.assignmentId}}),a("v-radio-group",{model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}},t._l(t.options,(function(e){return a("div",{key:e.value},[a("v-radio",{attrs:{value:e.value,name:"answer"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",{domProps:{innerHTML:t._s(e.label)}})]},proxy:!0}],null,!0)}),a("v-img",{attrs:{"max-height":"100","max-width":"250",src:n("b967")("./"+e.img+".png")}})],1)})),0),a("v-btn",{attrs:{elevation:"2",disabled:!t.submittable,color:"primary"},on:{click:t.submittingForm}},[t._v("Submit")])],1)},p=[],h=n("2909"),m=(n("d81d"),n("99af"),n("caad"),n("2532"),n("bc3a")),f=n.n(m),b=n("a959"),g="https://www.mturk.com/mturk/externalSubmit",v="https://workersandbox.mturk.com/mturk/externalSubmit",x={value:0,label:"<span class='green--text font-weight-bold'>No anomaly: </span>Time series with good data quality",img:"good_data_quality"},w={data:function(){return{startTime:new Date,endTime:null,timeSpent:null,action:null,assignmentId:"ASSIGNMENT_ID_NOT_AVAILABLE",sandbox:!0,hitId:null,workerId:null,answer:null,submittable:!1,bunch:null,non_oki:[{value:1,label:"<span class='red--text font-weight-bold'>Anomaly: </span>Time series with downward spike(s)",img:"sudden_spike_to_zero"},{value:2,label:"<span class='red--text font-weight-bold'>Anomaly: </span>Time series with upward spike(s)",img:"repeated_positive_spike"}]}},created:function(){},computed:Object(i["a"])(Object(i["a"])({permittedValues:function(){return _.map(this.options,(function(t){return t.value}))}},Object(d["d"])(["fileName","start_cand","end_cand","start_position","end_position"])),{},{options:function(){var t=_.shuffle(this.non_oki);return[x].concat(Object(h["a"])(t))}}),watch:{answer:function(t){this.permittedValues.includes(t)&&(this.submittable=!0)}},mounted:function(){var t=this.$route.query;this.sandbox=t.sandbox,this.assignmentId=t.assignmentId,this.hitId=t.hitId,this.workerId=t.workerId,this.bunch=t.bunch,1===parseInt(this.sandbox)?this.action=v:this.action=g},methods:{submittingForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.endTime=new Date,t.timeSpent=Object(b["a"])(t.endTime,t.startTime),t.submittable=!1,n="https://t7oak2rx45.execute-api.us-east-1.amazonaws.com/Prod/submithit",e.next=6,f.a.post(n,{assignmentId:t.assignmentId,hitId:t.hitId,workerId:t.workerId,sandbox:t.sandbox,fileName:t.fileName,start_cand:parseInt(t.start_cand),end_cand:parseInt(t.end_cand),candidate:parseInt(t.start_cand),start_position:parseInt(t.start_position),end_position:parseInt(t.end_position),answer:t.answer,timeSpent:t.timeSpent,startTime:t.startTime,endTime:t.endTime,bunch:t.bunch});case 6:t.$refs.form.submit();case 7:case"end":return e.stop()}}),e)})))()}}},y=w,O=n("2877"),k=n("6544"),T=n.n(k),I=n("8336"),j=n("adda"),S=n("67b6"),A=n("43a6"),E=Object(O["a"])(y,l,p,!1,null,null,null),D=E.exports;T()(E,{VBtn:I["a"],VImg:j["a"],VRadio:S["a"],VRadioGroup:A["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dataLoading?t._e():n("highcharts",{ref:"chart",staticClass:"hc",attrs:{constructorType:"stockChart",options:t.chartOptions,updateArgs:[!0,!0,!0]}})},L=[],R={data:function(){return{chartOptions:{boost:{enabled:!0},series:[{lineWidth:.5,dataGrouping:{enabled:!1},type:"line",turboThreshold:1e6,data:[]}]}}},created:function(){},computed:Object(i["a"])({},Object(d["d"])(["dataLoading","data"])),watch:{data:function(t){this.chartOptions.series[0].data=t}},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},N=R,M=Object(O["a"])(N,C,L,!1,null,null,null),z=(M.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.dataLoading?t._e():n("highcharts",{ref:"highcharts",staticClass:"hc",attrs:{constructorType:"stockChart",options:t.chartOptions,updateArgs:[!0,!0,!0]}}),!t.dataLoading&&t.zoomer?n("div",[n("v-btn",{on:{click:t.resetZoom}},[t._v("Reset zoom")])],1):t._e()],1)}),V=[],P=(n("159b"),n("4602")),$=n("a1d8"),q=n("590d"),F=n("0dae"),B=function(t,e){var n=[];t.series[0].points.forEach((function(t){t.visible&&n.push(t.y)}));Math.min.apply(Math,n),Math.max.apply(Math,n);t.yAxis[0].setExtremes()},G={props:{zoomer:{type:Boolean,default:!0},title:{type:String,default:""}},data:function(){var t=this;return{spread:2,innerChart:null,eps:0,chartOptions:{title:{text:this.title,floating:!0,align:"left",x:25,y:70},chart:{height:this.zoomer?400:200,events:{load:function(){t.innerChart=this,B(this,t.spread)}}},scrollbar:{enabled:!1},boost:{enabled:!0},navigator:{enabled:this.zoomer},rangeSelector:{enabled:this.zoomer,selected:3,buttons:[{type:"hour",count:1,text:"1hr"},{type:"hour",count:3,text:"3hr"},{type:"day",count:1,text:"1day"},{type:"day",count:3,text:"3days"},{type:"week",count:1,text:"Week"}]},xAxis:{min:null,max:null,events:{afterSetExtremes:function(){B(this.chart,t.spread)}},plotBands:[{borderColor:"red",borderWidth:1,color:"#FCFFC5",from:null,to:null}]},series:[{type:"line",turboThreshold:1e6,data:[],lineWidth:.5,dataGrouping:{enabled:!1}}]}}},computed:Object(i["a"])({},Object(d["d"])(["dataLoading","data","start_cand","end_cand","start_position","end_position"])),watch:{data:function(t){var e=Object(P["a"])(t[this.start_position].x/1e3);this.eps=Math.max(parseInt(.5*(this.end_position-this.start_position)),20);var n=Math.max(parseInt(this.eps/2),3);this.chartOptions.series[0].data=t;Math.max(this.start_position-this.eps,0),Math.min(this.end_position+this.eps,t.length-1);var a=Math.max(this.start_position-n,0),r=Math.min(this.end_position+n,t.length-1);if(this.zoomer){var o=1e3*Object($["a"])(Object(q["a"])(e,36)),i=1e3*Object($["a"])(Object(F["a"])(e,36));this.chartOptions.xAxis.min=o,this.chartOptions.xAxis.max=i}this.chartOptions.xAxis.plotBands[0].from=t[a].x,this.chartOptions.xAxis.plotBands[0].to=t[r].x}},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{resetZoom:function(){var t=this.$refs.highcharts.chart;t.xAxis[0].setExtremes(this.data[this.start_position-this.eps].x,this.data[this.end_position+this.eps].x)}}},U=G,W=Object(O["a"])(U,z,V,!1,null,null,null),Q=W.exports;T()(W,{VBtn:I["a"]});var J={components:{FormModule:D,DetailedChart:Q},data:function(){return{}},created:function(){},computed:Object(i["a"])({},Object(d["d"])(["dataLoading","data"])),watch:{},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},Z=J,H=n("b0af"),K=n("99d9"),X=n("62ad"),Y=n("a523"),tt=n("0fd9"),et=Object(O["a"])(Z,c,u,!1,null,null,null),nt=et.exports;T()(et,{VCard:H["a"],VCardText:K["a"],VCardTitle:K["b"],VCol:X["a"],VContainer:Y["a"],VRow:tt["a"]});var at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.dataLoading,callback:function(e){t.dataLoading=e},expression:"dataLoading"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-card-text",[t._v(" Please stand by "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)},rt=[],ot={data:function(){return{dialog:!0}},computed:Object(i["a"])({},Object(d["d"])(["dataLoading"]))},it=ot,st=n("169a"),ct=n("8e36"),ut=Object(O["a"])(it,at,rt,!1,null,null,null),dt=ut.exports;T()(ut,{VCard:H["a"],VCardText:K["a"],VDialog:st["a"],VProgressLinear:ct["a"]});var lt={components:{Loading:dt,Main:nt},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query,n.lb,n.ub,n.marker,n.sandbox,n.assignmentId,n.hitId,n.workerId,t.SET_ROUTEQS(t.$route.query),e.next=4,t.getData();case 4:case"end":return e.stop()}}),e)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(d["b"])(["getData"])),Object(d["c"])(["SET_ROUTEQS"]))},pt=lt,ht=(n("5c0b"),n("7496")),mt=Object(O["a"])(pt,r,o,!1,null,null,null),ft=mt.exports;T()(mt,{VApp:ht["a"]});var bt=n("f309");a["default"].use(bt["a"]);var gt=new bt["a"]({}),_t=n("8c4f");a["default"].use(_t["a"]);var vt=[],xt=new _t["a"]({mode:"history",routes:vt}),wt=xt,yt=(n("c740"),n("2ef0")),Ot=n.n(yt);a["default"].use(d["a"]);var kt=new d["a"].Store({state:{start_cand:null,end_cand:null,start_position:null,end_position:null,routeqs:{},dataLoading:!0,fileName:null,data:null},mutations:{SET_ROUTEQS:function(t,e){t.routeqs=e;var n=e.start,a=e.end,r=e.file;t.start_cand=n,t.end_cand=a,t.fileName=r},SET_START_POSITION:function(t,e){t.start_position=e},SET_END_POSITION:function(t,e){t.end_position=e},DATA_LOADING:function(t){t.dataLoading=!0},DATA_LOADED:function(t){t.dataLoading=!1},SET_DATA:function(t,e){t.data=e}},actions:{getData:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,i,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,t.dispatch,r="https://blocke-channels-bucket.s3.amazonaws.com",o="".concat(r,"/").concat(a.fileName,".json"),e.next=5,f.a.get(o);case 5:i=e.sent,console.debug(i),s=Ot.a.map(i.data,(function(t){return{x:t.timestamp,y:t.value}})),n("SET_DATA",s),c=Ot.a.findIndex(s,(function(t){return t.x==a.start_cand})),u=Ot.a.findIndex(s,(function(t){return t.x==a.end_cand})),n("SET_START_POSITION",c),n("SET_END_POSITION",u),console.debug("START IND",c),console.debug("END POS",u),n("DATA_LOADED");case 16:case"end":return e.stop()}}),e)})))()}},modules:{}}),Tt=n("668e"),It=n.n(Tt),jt=n("ea7f"),St=n.n(jt),At=n("37d8"),Et=n.n(At),Dt=n("4452"),Ct=n.n(Dt);It()(St.a),Et()(St.a),Et()(St.a),a["default"].use(Ct.a),a["default"].config.productionTip=!1,new a["default"]({vuetify:gt,router:wt,store:kt,render:function(t){return t(ft)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"7edf":function(t,e,n){t.exports=n.p+"img/zero.9af1813e.png"},"8a09":function(t,e,n){t.exports=n.p+"img/sudden_spike_to_negative_value.61445a79.png"},"9c0c":function(t,e,n){},"9fed":function(t,e,n){t.exports=n.p+"img/neg.c0e200a3.png"},a5ec:function(t,e,n){t.exports=n.p+"img/repeated_positive_spike.b90a9b77.png"},b68e:function(t,e,n){t.exports=n.p+"img/pos.2e4efce8.png"},b967:function(t,e,n){var a={"./good_data_quality.png":"0137","./neg.png":"9fed","./normal.png":"24c3","./pos.png":"b68e","./rep.png":"2c36","./repeated_positive_spike.png":"a5ec","./sudden_positive_spike.png":"c390","./sudden_spike_to_negative_value.png":"8a09","./sudden_spike_to_zero.png":"cee6","./zero.png":"7edf"};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id="b967"},c390:function(t,e,n){t.exports=n.p+"img/sudden_positive_spike.589d535e.png"},cee6:function(t,e,n){t.exports=n.p+"img/sudden_spike_to_zero.a49e7265.png"}});
//# sourceMappingURL=app.37cb9a10.js.map